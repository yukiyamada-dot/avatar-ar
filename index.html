<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yuki AR (Animated, iPhone対応)</title>

  <!-- A-Frame & AR.js（markerベース、iOS Safariで動作） -->
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ar-js-org@3.4.5/aframe/build/aframe-ar.js"></script>

  <style>
    html, body { margin:0; height:100%; background:#000; }
    .hint {
      position: fixed; left: 10px; bottom: 10px;
      color: #fff; font: 12px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      opacity: .85;
    }
  </style>
</head>
<body>
  <!--
    ポイント：
    - arjs: Webカメラ/モバイルカメラを利用（Safari可）
    - <a-marker preset="hiro">: HIROマーカー上に表示（ファイル不要）
    - gltf-model: 同階層の Yuki.glb を読み込み
    - animation-mixer: GLBに含まれるアニメを自動再生（Play all）。1つだけでもOK
      * clip="*" で全トラック、loop="repeat" でループ
  -->
  <a-scene
    vr-mode-ui="enabled: false"
    embedded
    renderer="colorManagement: true; physicallyCorrectLights: true;"
    arjs="sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3; debugUIEnabled: false;"
  >
    <a-assets>
      <a-asset-item id="yuki" src="Yuki.glb"></a-asset-item>
    </a-assets>

    <!-- マーカーにかざすと表示（HIROマーカー） -->
    <a-marker preset="hiro">
      <a-entity
        gltf-model="#yuki"
        animation-mixer="clip: *; loop: repeat; timeScale: 1"
        position="0 0 0"
        rotation="0 0 0"
        scale="0.6 0.6 0.6"
      ></a-entity>
      <!-- 影が欲しい場合は簡易ライトを追加 -->
      <a-entity light="type: directional; intensity: 1" position="1 2 1"></a-entity>
      <a-entity light="type: ambient; intensity: 0.5"></a-entity>
    </a-marker>

    <!-- マーカー検出外のときは非表示 -->
    <a-entity camera></a-entity>
  </a-scene>

  <div class="hint">📌 HIROマーカーにかざすとYukiがアニメ再生で出現します。</div>
</body>
</html>
